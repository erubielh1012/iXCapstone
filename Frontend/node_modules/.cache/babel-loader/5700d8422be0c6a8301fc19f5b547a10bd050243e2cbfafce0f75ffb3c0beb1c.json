{"ast":null,"code":"import React,{useEffect,useMemo,useState}from'react';import{Modal}from'bootstrap';import FormImage from\"../FormImage\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function EditProfileModal(_ref){let{updateProfile,editProfile,info,onClose}=_ref;const[profileImage,setProfileImage]=useState(\"\");const modalEl=document.getElementById(\"editProfileModal\");const editProfileModal=useMemo(()=>{return modalEl?new Modal(modalEl):null;},[modalEl]);const[profile,setProfile]=useState();useEffect(()=>{if(editProfile){setProfile(editProfile);editProfileModal===null||editProfileModal===void 0?void 0:editProfileModal.show();}},[editProfile,editProfileModal]);const buildFormData=()=>{const formData=new FormData();formData.append(\"image\",profile.image);formData.append(\"firstName\",profile.firstName);formData.append(\"lastName\",profile.lastName);formData.append(\"bio\",profile.bio);formData.append(\"description\",profile.description);formData.append(\"id\",profile.id);return formData;};const resetProfile=()=>{setProfile({firstName:\"\",lastName:\"\",email:\"\",bio:\"\",image:\"\"});};const onSubmit=e=>{e===null||e===void 0?void 0:e.preventDefault();if(isFormValid()){const blogForm=buildFormData();if(editProfile){updateProfile(blogForm);// profile service of updating the profile\n}resetProfile();editProfileModal===null||editProfileModal===void 0?void 0:editProfileModal.hide();}};const onCloseModal=()=>{resetProfile();onClose();editProfileModal.hide();};const isFormValid=()=>{var _form$classList;const form=document.getElementById(\"profileForm\");form===null||form===void 0?void 0:(_form$classList=form.classList)===null||_form$classList===void 0?void 0:_form$classList.add(\"was-validated\");return form===null||form===void 0?void 0:form.checkValidity();};const onImageChange=e=>{var _e$target,_e$target$files;if(e!==null&&e!==void 0&&(_e$target=e.target)!==null&&_e$target!==void 0&&(_e$target$files=_e$target.files)!==null&&_e$target$files!==void 0&&_e$target$files.length){const file=e.target.files[0];setProfileImage(URL.createObjectURL(file));setProfile({...profile,image:file});}};return/*#__PURE__*/_jsx(\"div\",{className:\"modal fade\",id:\"editProfileModal\",\"aria-labelledby\":\"editProfileModalLabel\",\"aria-hidden\":\"true\",children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-dialog modal-xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"modal-title fs-5\",id:\"editProfileModalLabel\",children:\"Edit Profile\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-close\",onClick:onCloseModal})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-body\",children:/*#__PURE__*/_jsxs(\"form\",{id:\"profileForm\",children:[/*#__PURE__*/_jsx(FormImage,{image:profileImage,onChange:onImageChange}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"firstName\",className:\"form-label\",children:\"First Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"firstName\",value:profile===null||profile===void 0?void 0:profile.firstName,onChange:e=>{setProfile({...profile,firstName:e.target.value});},required:true}),/*#__PURE__*/_jsx(\"div\",{className:\"valid-feedback\",children:\"Looks good!\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"lastName\",className:\"form-label\",children:\"Last Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"lastName\",value:profile===null||profile===void 0?void 0:profile.lastName,onChange:e=>{setProfile({...profile,lastName:e.target.value});},required:true}),/*#__PURE__*/_jsx(\"div\",{className:\"valid-feedback\",children:\"Looks good!\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"bio\",className:\"form-label\",children:\"Bio\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"bio\",value:profile===null||profile===void 0?void 0:profile.bio,onChange:e=>{setProfile({...profile,bio:e.target.value});},required:true}),/*#__PURE__*/_jsx(\"div\",{className:\"valid-feedback\",children:\"Looks good!\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:onCloseModal,children:\"Close\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-outline-success\",onClick:onSubmit,children:\"Save changes\"})]})]})})});}","map":{"version":3,"names":["React","useEffect","useMemo","useState","Modal","FormImage","jsx","_jsx","jsxs","_jsxs","EditProfileModal","_ref","updateProfile","editProfile","info","onClose","profileImage","setProfileImage","modalEl","document","getElementById","editProfileModal","profile","setProfile","show","buildFormData","formData","FormData","append","image","firstName","lastName","bio","description","id","resetProfile","email","onSubmit","e","preventDefault","isFormValid","blogForm","hide","onCloseModal","_form$classList","form","classList","add","checkValidity","onImageChange","_e$target","_e$target$files","target","files","length","file","URL","createObjectURL","className","children","type","onClick","onChange","htmlFor","value","required"],"sources":["/Users/erucuh/Downloads/Coding4Fun/IX/CapstoneBlogApp/BlogApp/frontend/src/components/EditProfileModal/index.js"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\nimport { Modal } from 'bootstrap';\nimport FormImage from \"../FormImage\";\n\nexport default function EditProfileModal({\n    updateProfile, editProfile, info, onClose\n}) {\n  const [profileImage, setProfileImage] = useState(\"\");\n\n  \n  const modalEl = document.getElementById(\"editProfileModal\")\n  const editProfileModal = useMemo(() => {\n    return modalEl ? new Modal(modalEl) : null;\n  }, [modalEl])\n  \n  const [ profile, setProfile ] = useState ();\n\n  useEffect(() => {\n      if (editProfile) {\n        setProfile(editProfile)\n        editProfileModal?.show();\n      } \n  }, [editProfile, editProfileModal]);\n\n  const buildFormData = () => {\n    const formData = new FormData();\n    formData.append(\"image\", profile.image);\n    formData.append(\"firstName\", profile.firstName);\n    formData.append(\"lastName\", profile.lastName);\n    formData.append(\"bio\", profile.bio);\n    formData.append(\"description\", profile.description);\n    formData.append(\"id\", profile.id);\n    return formData;\n  }\n\n  const resetProfile = () => {\n    setProfile({\n      firstName: \"\",\n      lastName: \"\",\n      email: \"\",\n      bio: \"\",\n      image: \"\",\n    })\n  }\n\n  const onSubmit = (e) => {\n    e?.preventDefault();\n    if (isFormValid()) { \n      const blogForm = buildFormData();\n      if (editProfile) {\n        updateProfile(blogForm);\n        // profile service of updating the profile\n      }\n      resetProfile();\n      editProfileModal?.hide();\n    }\n  };\n\n  const onCloseModal = () => {\n    resetProfile();\n    onClose();\n    editProfileModal.hide();\n  };\n\n  const isFormValid = () => {\n    const form = document.getElementById(\"profileForm\");\n    form?.classList?.add(\"was-validated\");\n    return form?.checkValidity();\n  };\n\n  const onImageChange = (e) => {\n    if (e?.target?.files?.length) {\n      const file = e.target.files[0];\n      setProfileImage(URL.createObjectURL(file));\n      setProfile({ ...profile, image: file });\n    }\n  };\n\n  return (\n    <div\n      className=\"modal fade\"\n      id=\"editProfileModal\"\n      aria-labelledby=\"editProfileModalLabel\"\n      aria-hidden=\"true\"\n    >\n      <div className=\"modal-dialog modal-xl\">\n        <div className=\"modal-content\">\n          <div className=\"modal-header\">\n            <h1 className=\"modal-title fs-5\" id=\"editProfileModalLabel\">\n              {\"Edit Profile\"}\n            </h1>\n            <button\n              type=\"button\"\n              className=\"btn-close\"\n              onClick={onCloseModal}\n            ></button>\n          </div>\n          {/* check all the code below */}\n          <div className=\"modal-body\">\n            <form id=\"profileForm\">\n              <FormImage image={profileImage} onChange={onImageChange} />\n              <div className=\"mb-3\">\n                <label htmlFor=\"firstName\" className=\"form-label\">\n                  First Name\n                </label>\n                <input\n                  type=\"text\"\n                  className=\"form-control\"\n                  id=\"firstName\"\n                  value={profile?.firstName}\n                  onChange={(e) => {\n                    setProfile({ ...profile, firstName: e.target.value });\n                  }}\n                  required\n                />\n                <div className=\"valid-feedback\">Looks good!</div>\n              </div>\n              <div className=\"mb-3\">\n                <label htmlFor=\"lastName\" className=\"form-label\">\n                  Last Name\n                </label>\n                <input\n                  type=\"text\"\n                  className=\"form-control\"\n                  id=\"lastName\"\n                  value={profile?.lastName}\n                  onChange={(e) => {\n                    setProfile({ ...profile, lastName: e.target.value });\n                  }}\n                  required\n                />\n                <div className=\"valid-feedback\">Looks good!</div>\n              </div>\n              <div className=\"mb-3\">\n                <label htmlFor=\"bio\" className=\"form-label\">\n                  Bio\n                </label>\n                <input\n                  type=\"text\"\n                  className=\"form-control\"\n                  id=\"bio\"\n                  value={profile?.bio}\n                  onChange={(e) => {\n                    setProfile({ ...profile, bio: e.target.value });\n                  }}\n                  required\n                />\n                <div className=\"valid-feedback\">Looks good!</div>\n              </div>\n            </form>\n          </div>\n          <div className=\"modal-footer\">\n            <button\n              type=\"button\"\n              className=\"btn btn-secondary\"\n              onClick={onCloseModal}\n            >\n              Close\n            </button>\n            <button\n              type=\"button\"\n              className=\"btn btn-outline-success\"\n              onClick={onSubmit}\n            >\n              Save changes\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}